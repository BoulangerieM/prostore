<!-- TODO: FAIRE UN STYLE GLOBAL POUR MAT PLUTOT QUE DE SURCHARGER PARTOUT
 -->
<mat-card class="m-card">
    <mat-card-title fxLayout="row wrap" fxLayoutAlign="center center" class="m-card-title">
        <div>Mes infos</div>
    </mat-card-title>
    <mat-card-content fxLayout="column wrap" fxLayoutAlign="space-around center">
        <p>Email : {{userInformations?.email}}</p>
        <p>Nom de votre entreprise : {{userInformations?.name}}</p>
        <p>Numéro de téléphone : {{userInformations?.phone}}</p>
        <p>Email : {{userInformations?.email}}</p>
        <p>Adresse:</p>
        <p>{{userInformations?.address?.street}}</p>
        <p>{{userInformations?.address?.zipCode}} {{userInformations?.address?.city}}</p>
        <div *ngIf="userInformations?.deliveryAddress">
            <p>Adresse de livraison:</p>
            <p>{{userInformations?.deliveryAddress?.street}}</p>
            <p>{{userInformations?.deliveryAddress?.zipCode}} {{userInformations?.deliveryAddress?.city}}</p>
        </div>
        <button mat-raised-button aria-label="Modifier mes informations personnelles"
            (click)="updatingInfos = !updatingInfos">
            Modifier mes infos
        </button>
        <!-- <button mat-raised-button aria-label="Modifier mon mot de passe" (click)="updatingPassword = !updatingPassword">
            Modifier mon mot de passe
        </button> -->
    </mat-card-content>
</mat-card>
<!-- -------------------------------------------------------------------------------------------- -->
<div *ngIf="updatingInfos">ATTENTION CES CHANGEMENTS NE SERONT EFFECTIFS QUE POUR LES PROCHAINES COMMANDES (finaliser
    wording)</div>
<form [formGroup]="infosPersosForm" (ngSubmit)="submitUpdateInfos()" *ngIf="updatingInfos">
    <div fxLayout="row wrap" fxLayoutAlign="space-evenly space-evenly">
        <mat-form-field fxFlex="40" fxFlex.lt-sm="87" appearance="outline">
            <mat-label>Nom de votre entreprise</mat-label>
            <input matInput type="text" placeholder="Ex: Restaurant du port" formControlName="name" required />
            <mat-error *ngIf="infosPersosForm.get('name')?.invalid">{{
                getErrorMessage("name", infosPersosForm, errorMessages)
                }}</mat-error>
        </mat-form-field>
        <mat-form-field fxFlex="40" fxFlex.lt-sm="87" appearance="outline">
            <mat-label>Numéro de téléphone</mat-label>
            <input matInput type="tel" placeholder="Ex: 0546331122" formControlName="phone" required />
            <mat-error *ngIf="infosPersosForm.get('phone')?.invalid">{{
                getErrorMessage("phone", infosPersosForm, errorMessages)
                }}</mat-error>
        </mat-form-field>
    </div>
    <div formGroupName="address">
        <div fxLayout="row" fxLayoutAlign="center">
            <mat-form-field fxFlex="87" appearance="outline">
                <mat-label>Rue</mat-label>
                <input matInput type="text" placeholder="Ex: 2 rue du port" formControlName="street" required />
                <mat-error *ngIf="infosPersosForm.get('address')?.get('street')?.invalid">{{
                    getErrorMessage("street", infosPersosForm, errorMessages, "address")
                    }}</mat-error>
            </mat-form-field>
        </div>
        <div fxLayout="row wrap" fxLayoutAlign="space-evenly space-evenly">
            <mat-form-field fxFlex="40" fxFlex.lt-sm="87" appearance="outline">
                <mat-label>Code postal</mat-label>
                <input matInput type="text" placeholder="Ex: 17000" formControlName="zipCode" required />
                <mat-error *ngIf="infosPersosForm.get('address')?.get('zipCode')?.invalid">{{
                    getErrorMessage("zipCode", infosPersosForm, errorMessages, "address")
                    }}</mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="40" fxFlex.lt-sm="87" appearance="outline">
                <mat-label>Ville</mat-label>
                <input matInput type="text" placeholder="Ex: La Rochelle" formControlName="city" required />
                <mat-error *ngIf="infosPersosForm.get('address')?.get('city')?.invalid">{{
                    getErrorMessage("city", infosPersosForm, errorMessages, "address")
                    }}</mat-error>
            </mat-form-field>
        </div>
    </div>
    <div fxLayout="row wrap" class="checkboxRow" fxLayoutAlign="flex-start center">
        <mat-checkbox fxFlexOffset="7" (change)="hasDifferentDeliveryAddress($event.checked)"
            formControlName="hasDifferentDeliveryAddress">Adresse de livraison différente</mat-checkbox>
    </div>
    <div formGroupName="deliveryAddress" *ngIf="displayDeliveryForm">
        <div fxLayout="row" fxLayoutAlign="center">
            <mat-form-field fxFlex="87" appearance="outline">
                <mat-label>Rue</mat-label>
                <input matInput type="text" placeholder="Ex: 2 rue du port" formControlName="street" required />
                <mat-error *ngIf="infosPersosForm.get('deliveryAddress')?.get('street')?.invalid">{{
                    getErrorMessage("street",
                    infosPersosForm, errorMessages,
                    "address") }}</mat-error>
            </mat-form-field>
        </div>
        <div fxLayout="row wrap" fxLayoutAlign="space-evenly space-evenly">
            <mat-form-field fxFlex="40" fxFlex.lt-sm="87" appearance="outline">
                <mat-label>Code postal</mat-label>
                <input matInput type="text" placeholder="Ex: 17000" formControlName="zipCode" required />
                <mat-error *ngIf="infosPersosForm.get('deliveryAddress')?.get('zipCode')?.invalid">{{
                    getErrorMessage("zipCode",
                    infosPersosForm, errorMessages,
                    "address") }}</mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="40" fxFlex.lt-sm="87" appearance="outline">
                <mat-label>Ville</mat-label>
                <input matInput type="text" placeholder="Ex: La Rochelle" formControlName="city" required />
                <mat-error *ngIf="infosPersosForm.get('deliveryAddress')?.get('city')?.invalid">{{
                    getErrorMessage("city", infosPersosForm,
                    errorMessages, "address")
                    }}</mat-error>
            </mat-form-field>
        </div>
    </div>
    <div fxLayout="row wrap" fxLayoutAlign="space-evenly center">
        <button fxFlex="40" fxFlex.lt-sm="87" fxFlexOrder.lt-sm="1" fxFlexOrder.gt-xs="2" mat-raised-button
            type="submit">
            Mettre à jour mes informations
        </button>
    </div>
</form>
<!-- ------------------------------------------------------------------------ -->
<!-- <form [formGroup]="updatePasswordForm" (ngSubmit)="submitUpdatePassword()" *ngIf="updatingPassword">
    <div fxLayout="row wrap" fxLayoutAlign="space-evenly center">
        <mat-form-field fxFlex="87" appearance="outline">
            <mat-label>Mot de passe</mat-label>
            <input matInput type="password" formControlName="currentPassword" required />
            <mat-error *ngIf="updatePasswordForm.get('currentPassword')?.invalid">{{
                getErrorMessage("currentPassword", updatePasswordForm, errorMessagesUpdatePassword)
                }}</mat-error>
        </mat-form-field>
    </div>
    <div fxLayout="row wrap" fxLayoutAlign="space-evenly center">
        <mat-form-field fxFlex="87" appearance="outline">
            <mat-label>Nouveau mot de passe</mat-label>
            <input matInput type="password" formControlName="password" required />
            <mat-error *ngIf="updatePasswordForm.get('password')?.invalid">{{
                getErrorMessage("password", updatePasswordForm, errorMessagesUpdatePassword)
                }}</mat-error>
        </mat-form-field>
        <mat-form-field fxFlex="87" appearance="outline">
            <mat-label>Confirmer le nouveau mot de passe</mat-label>
            <input matInput type="password" formControlName="confirmPassword" required />
            <mat-error *ngIf="updatePasswordForm.get('confirmPassword')?.invalid">{{
                getErrorMessage("confirmPassword", updatePasswordForm, errorMessagesUpdatePassword)
                }}</mat-error>
        </mat-form-field>
    </div>
    <div fxLayout="row wrap" fxLayoutAlign="space-evenly center">
        <button fxFlex="40" fxFlex.lt-sm="87" mat-raised-button type="submit">
            Valider
        </button>
    </div>
</form> -->